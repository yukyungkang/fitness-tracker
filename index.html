<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>90일 다이어트 플랜</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>💪</text></svg>">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module" src="script.js" defer></script>
</head>
<body>

<!-- PC/태블릿용 헤더 -->
<header>
  <div class="header-content">
    <div class="logo-section">
      <div class="logo-icon">💪</div>
      <h1>90일 다이어트 플랜</h1>
    </div>
    
    <!-- 우측 상단 로그인 영역 -->
    <div class="auth-section">
      <button id="loginBtn" class="auth-btn login-btn">
        <span class="btn-icon">🔐</span>
        Google 로그인
      </button>
      <div id="userSection" class="user-section">
        <div class="user-info">
          <span class="user-name" id="userInfo"></span>
        </div>
        <button id="logoutBtn" class="auth-btn logout-btn">
          로그아웃
        </button>
      </div>
    </div>
  </div>
</header>

<!-- PC용 상단 네비게이션 -->
<nav class="desktop-nav">
  <div class="nav-container">
    <button class="nav-item active" data-tab="guide">
      <span class="nav-icon">📖</span>
      <span class="nav-text">가이드</span>
    </button>
    <button class="nav-item" data-tab="plan">
      <span class="nav-icon">📋</span>
      <span class="nav-text">플랜</span>
    </button>
    <button class="nav-item" data-tab="body">
      <span class="nav-icon">📊</span>
      <span class="nav-text">신체 정보</span>
    </button>
    <button class="nav-item" data-tab="stats">
      <span class="nav-icon">📈</span>
      <span class="nav-text">통계</span>
    </button>
    <button class="nav-item" data-tab="settings">
      <span class="nav-icon">⚙️</span>
      <span class="nav-text">설정</span>
    </button>
  </div>
</nav>

<!-- 모바일용 하단 네비게이션 -->
<nav class="mobile-bottom-nav">
  <button class="mobile-nav-item active" data-tab="guide">
    <span class="mobile-nav-icon">📖</span>
    <span class="mobile-nav-text">가이드</span>
  </button>
  <button class="mobile-nav-item" data-tab="plan">
    <span class="mobile-nav-icon">📋</span>
    <span class="mobile-nav-text">플랜</span>
  </button>
  <button class="mobile-nav-item" data-tab="body">
    <span class="mobile-nav-icon">📊</span>
    <span class="mobile-nav-text">신체정보</span>
  </button>
  <button class="mobile-nav-item" data-tab="stats">
    <span class="mobile-nav-icon">📈</span>
    <span class="mobile-nav-text">통계</span>
  </button>
  <button class="mobile-nav-item" data-tab="settings">
    <span class="mobile-nav-icon">⚙️</span>
    <span class="mobile-nav-text">설정</span>
  </button>
</nav>

<!-- Toast 알림 -->
<div id="toastContainer"></div>

<!-- 가이드 -->
<section id="guide" class="active">
  <h2>주기 기반 다이어트 가이드</h2>
  <div class="card-container">
    <div class="card red">
      <h3>월경기</h3>
      <p>저강도</p>
      <ul>
        <li>스트레칭</li>
        <li>걷기</li>
      </ul>
    </div>
    <div class="card green">
      <h3>여포기</h3>
      <p>중강도</p>
      <ul>
        <li>인클라인 걷기</li>
        <li>IMPT 루틴</li>
      </ul>
    </div>
    <div class="card yellow">
      <h3>배란기</h3>
      <p>고강도</p>
      <ul>
        <li>빠른 걷기</li>
        <li>IMPT + 코어</li>
      </ul>
    </div>
    <div class="card purple">
      <h3>황체기</h3>
      <p>중강도 유지</p>
      <ul>
        <li>인클라인 걷기</li>
        <li>IMPT 루틴</li>
      </ul>
    </div>
  </div>
</section>

<!-- 플랜 -->
<section id="plan">
  <h2>90일 다이어트 플랜</h2>
  <div class="progress-container">
    <p>전체 진행률: <span id="progressText">0%</span></p>
    <div class="progress-bar"><div id="progressFill"></div></div>
  </div>
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Day</th>
          <th>날짜</th>
          <th>주기</th>
          <th>아침 유산소</th>
          <th>저녁 홈트</th>
          <th>아침 완료</th>
          <th>저녁 완료</th>
        </tr>
      </thead>
      <tbody id="planTable"></tbody>
    </table>
  </div>
</section>

<!-- 신체 정보 기록 -->
<section id="body">
  <h2>📊 신체 정보 기록</h2>
  
  <!-- 현재 상태 요약 -->
  <div class="body-summary">
    <div class="summary-card">
      <div class="summary-icon">⚖️</div>
      <div class="summary-content">
        <span class="summary-label">현재 체중</span>
        <span class="summary-value" id="currentWeightDisplay">-kg</span>
      </div>
    </div>
    <div class="summary-card">
      <div class="summary-icon">📉</div>
      <div class="summary-content">
        <span class="summary-label">체지방률</span>
        <span class="summary-value" id="currentBodyFatDisplay">-%</span>
      </div>
    </div>
    <div class="summary-card">
      <div class="summary-icon">💪</div>
      <div class="summary-content">
        <span class="summary-label">근육량</span>
        <span class="summary-value" id="currentMuscleDisplay">-kg</span>
      </div>
    </div>
    <div class="summary-card">
      <div class="summary-icon">🎯</div>
      <div class="summary-content">
        <span class="summary-label">목표까지</span>
        <span class="summary-value" id="remainingWeightDisplay">-kg</span>
      </div>
    </div>
  </div>
  
  <!-- 입력 폼 -->
  <div class="body-input-section">
    <h3>📝 오늘의 신체 정보 입력</h3>
    <div class="input-form">
      <div class="form-row">
        <div class="form-group">
          <label for="measureDate">측정 날짜</label>
          <input type="date" id="measureDate">
        </div>
        <div class="form-group">
          <label for="measureTime">측정 시간</label>
          <select id="measureTime">
            <option value="morning">아침 (기상 후)</option>
            <option value="evening">저녁 (운동 후)</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="weightInput">체중 (kg)</label>
          <input type="number" id="weightInput" placeholder="예: 65.5" step="0.1">
        </div>
        <div class="form-group">
          <label for="bodyFatInput">체지방률 (%)</label>
          <input type="number" id="bodyFatInput" placeholder="예: 18.5" step="0.1">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="muscleMassInput">근육량 (kg)</label>
          <input type="number" id="muscleMassInput" placeholder="예: 45.2" step="0.1">
        </div>
        <div class="form-group">
          <label for="visceralFatInput">내장지방 레벨</label>
          <input type="number" id="visceralFatInput" placeholder="예: 5" step="1">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="waterPercentInput">수분률 (%)</label>
          <input type="number" id="waterPercentInput" placeholder="예: 55.5" step="0.1">
        </div>
        <div class="form-group">
          <label for="bmrInput">기초대사율 (kcal)</label>
          <input type="number" id="bmrInput" placeholder="예: 1450" step="1">
        </div>
      </div>
      <div class="form-group full-width">
        <label for="bodyMemo">메모</label>
        <textarea id="bodyMemo" placeholder="컨디션, 측정 조건 등을 기록해보세요"></textarea>
      </div>
      <button id="addBodyDataBtn" class="btn-primary">📊 신체 정보 저장</button>
    </div>
  </div>
  
  <!-- 기록 테이블 -->
  <div class="records-section">
    <h3>📋 최근 기록 (최근 10개)</h3>
    <div class="table-container">
      <table class="body-records-table">
        <thead>
          <tr>
            <th>날짜</th>
            <th>시간</th>
            <th>체중</th>
            <th>체지방률</th>
            <th>근육량</th>
            <th>BMI</th>
            <th>메모</th>
            <th>삭제</th>
          </tr>
        </thead>
        <tbody id="bodyRecordsTable"></tbody>
      </table>
    </div>
  </div>
</section>

<!-- 통계 -->
<section id="stats">
  <h2>📊 신체 분석 & 운동 통계</h2>
  
  <!-- 주요 지표 카드 -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">📊</div>
      <div class="stat-content">
        <h3>체중 변화</h3>
        <div class="stat-value" id="weightChangeDisplay">0kg</div>
        <div class="stat-period">지난 30일</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">📉</div>
      <div class="stat-content">
        <h3>체지방 감소</h3>
        <div class="stat-value" id="bodyFatChangeDisplay">0%</div>
        <div class="stat-period">지난 30일</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">💪</div>
      <div class="stat-content">
        <h3>근육량 증가</h3>
        <div class="stat-value" id="muscleGainDisplay">0kg</div>
        <div class="stat-period">지난 30일</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">🎯</div>
      <div class="stat-content">
        <h3>현재 BMI</h3>
        <div class="stat-value" id="currentBMIDisplay">0</div>
        <div class="stat-period">최근 측정</div>
      </div>
    </div>
  </div>
  
  <!-- 차트 그리드 -->
  <div class="charts-grid">
    <div class="chart-container">
      <h3>📊 체중 변화 추이</h3>
      <canvas id="weightChart"></canvas>
    </div>
    <div class="chart-container">
      <h3>📉 체지방률 변화</h3>
      <canvas id="bodyFatChart"></canvas>
    </div>
    <div class="chart-container">
      <h3>💪 근육량 변화</h3>
      <canvas id="muscleChart"></canvas>
    </div>
    <div class="chart-container">
      <h3>🏃‍♀️ 운동 완료율</h3>
      <canvas id="workoutChart"></canvas>
    </div>
  </div>
</section>

<!-- 설정 -->
<section id="settings">
  <h2>설정</h2>
  <div class="settings-form">
    <div class="form-group">
      <label for="prevPeriodStart">이전 생리 시작일:</label>
      <input type="date" id="prevPeriodStart">
    </div>
    
    <div class="form-group">
      <label for="periodStart">마지막 생리 시작일:</label>
      <input type="date" id="periodStart">
    </div>
    
    <div class="form-group">
      <label>평균 주기: <span id="avgCycleDisplay">28</span>일</label>
    </div>
    
    <div class="form-group">
      <label for="cycleLength">평균 주기 (일):</label>
      <input type="number" id="cycleLength" value="28">
    </div>
    
    <div class="form-group">
      <label for="menstrualLength">월경기 길이 (일):</label>
      <input type="number" id="menstrualLength" value="5">
    </div>
    
    <div class="form-group">
      <label for="goalWeight">목표 체중 (kg):</label>
      <input type="number" id="goalWeight" value="60">
    </div>
    
    <div class="form-group">
      <label for="userHeight">키 (cm):</label>
      <input type="number" id="userHeight" placeholder="예: 165">
    </div>
    
    <button id="saveSettingsBtn" class="btn-primary">💾 설정 저장</button>
    
    <h3>이전 설정 기록</h3>
    <div id="settingsHistoryList"></div>
  </div>
</section>

</body>
</html>
